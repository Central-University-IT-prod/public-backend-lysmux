# Travel Agent

Ссылка на бота: [@prod_travel_agent_bot](https://t.me/prod_travel_agent_bot)

# ВНИМАНИЕ! IP GitHub находится в чёрном списке некоторых API. Запускать только локально

# Установка

```shell
git clone https://github.com/Central-University-IT-prod/backend-lysmux
cd backend-lysmux
docker compose up --build
```

# Возможности
* Создание/редактирование профиля
* Создание/редактирование путешествия
* Добавление/удаление участников путешествия
* Создание/редактирование заметок путешествия
* Создание/редактирование локаций путешествия
* Погода
* Поиск авиа и ж/д билетов
* Построение маршрута
* Предложения ресторанов/отелей/интересных мест

# Демонстрация
![Снимок экрана 2024-03-26 065901](https://github.com/Central-University-IT-prod/backend-lysmux/assets/62431880/0a0b10e6-983a-4833-ae69-e709a8464378)
![Снимок экрана 2024-03-26 065913](https://github.com/Central-University-IT-prod/backend-lysmux/assets/62431880/64cc85ce-aeb6-4ba9-9579-6a037aeff081)
![Снимок экрана 2024-03-26 065924](https://github.com/Central-University-IT-prod/backend-lysmux/assets/62431880/721ef048-bf9a-41c7-a4cc-1b685dea120a)
![Снимок экрана 2024-03-26 065943](https://github.com/Central-University-IT-prod/backend-lysmux/assets/62431880/313361bb-7cac-494b-9356-20ff77a064c6)
![Снимок экрана 2024-03-26 070002](https://github.com/Central-University-IT-prod/backend-lysmux/assets/62431880/66c17cfd-52f7-4d12-9b88-280b5d05d2ec)


# Фичи
## Поиск локации через inline режим
![Снимок экрана 2024-03-26 073441](https://github.com/Central-University-IT-prod/backend-lysmux/assets/62431880/cc8a99d4-51c7-4c9f-aa5e-f22a6aee60fb)

## Добавление участников через контакты
![Снимок экрана 2024-03-26 073529](https://github.com/Central-University-IT-prod/backend-lysmux/assets/62431880/6602a62e-a272-4155-a32b-30bee631280e)
![Снимок экрана 2024-03-26 073624](https://github.com/Central-University-IT-prod/backend-lysmux/assets/62431880/f13309bc-4ba8-4662-8f73-3e6ccb8f8fe3)


# Структура проекта
Кодовая база поделена на так называемые сервисы.
Это способствует легкому и быстрому развитию проекта.
Так, например, не составит труда добаить web интерфейс.

Сервисы:
* travel_service:
  * Сервис управления путешествиями. Управляет логикой взаимодействия с базой данных
* resources_service:
  * Сервис, агрегирующий данные с различных API
* bot_service:
  * Сам бот. Взаимодействует с конечным пользователем


# Зависимости
### Postgres
За основную базу данных проекта была взята СУБД Postgres
#### Причины выбора:
* PostgreSQL обладает высокой производительностью даже при обработке больших объёмов данных
* Популярность
* Поддержка различных типов данных
* Поддержка расширений (в проекте используется расширение `uuid-ossp` для генерации `id объектов`)

### Redis
Используется для кэширования данных API, а также для хранения информации о состоянии диалога с ботом
#### Причины выбора:
* Redis очень быстрый. Он обеспечивает моментальный доступ к данным, поскольку хранит их в оперативной памяти
* Redis легко масштабируется горизонтально
* Большое комьюнити и обилие документации.
* Redis проще в обслуживании


# Интеграция с внешними сервисами
### Nominatim (OpenStreetMap)
* Открытый исходный код (можно установить локально)
* Бесплатно в использовании
* Прямое и обратное геокодирование

### OpenMeteo
* Бесплатно в использовании
* Предоставляет API для получения прогнозов погоды по пункту
  

### FourSquare
*  Cоциальная сеть с функцией геопозиционирования
*  Практически бесплатно в использовании (большие лимиты на запросы)

### RzdApi
*  API РЖД для поиска билетов на поезда

### KupibiletApi
*  API КупиБилет для поиска билетов на самолёты


# Описание базы данных
![Database ER diagram (crow's foot)](https://github.com/Central-University-IT-prod/backend-lysmux/assets/62431880/2a91669e-c027-4b6e-9095-289a19ba7710)

В базе данных представлено 5 основных и 1 служебная таблица:
* alembic_version
  * Служебная таблица используется для определения версии базы для последующих миграций
* users
  * Таблица пользователей
* travels
  * Таблица путешествий
* notes
  * Таблица заметок
* travel_locations
  * Локации
* travel_participants
  * Связь между путешествиями и участниками

<details>
  <summary>Пасхалка(<i>тык</i>)</summary>
 
  Чокопай)
  ![Чокопай)](https://ntsfpc.ru/wp-content/uploads/2021/01/chokopaj-2-scaled-300x246.jpg)
</details>
